var User;User=require("./../models/user.js"),module.exports=function(a){var b,c;return b={},c=a.locals.mongoose,b.create=function(a,b){var c;return c=new User(a.body),User.findOne({email:c.email}).exec(function(d,e){return e?b.status(422).send({errors:{email:{message:"already taken"}}}):(c.setPassword(a.body.password),c.setAuthenticationToken(),c.save(function(a){return a?(console.log(a),b.status(422).send(a)):b.status(201).send(c)}))})},b};
var GoogleStrategy,User;GoogleStrategy=require("passport-google").Strategy,User=require("./../models/user.js"),module.exports.configure=function(a){var b,c;return b=a.locals.config,c=a.locals.passport,c.use(new GoogleStrategy({clientId:b.google.consumerKey,clientSecret:b.twitter.consumerSecret,oauthCallbackURL:""+b.oAuthCallbackBaseUrl+"/auth/google/callback",returnURL:""+b.oAuthCallbackBaseUrl+"/auth/google/callback",realm:b.oAuthCallbackBaseUrl},function(a,b,c,d){return User.findOne({googleId:a},function(c,e){return e||(e=new User({googleId:a})),e.name=b.displayName,b.emails&&b.emails[0]&&(e.email=b.emails[0].value),e.generateAndSetAuthenticationToken(),e.save(function(a,b){return d(a,b)})})}))};